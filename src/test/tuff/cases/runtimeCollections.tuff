extern let { __vec_new, __vec_push, __vec_get, __vec_set, __vec_init, __vec_capacity, __vec_includes, __vec_length, __map_new, mapSet, mapGet, __set_new, setAdd, setHas } = collections;

extern type Vec<T>;
extern fn __vec_new() : Vec<I32>;
extern fn __vec_push(this: Vec<I32>, item: I32) : Vec<I32>;
extern fn __vec_get(this: Vec<I32>, index: USize) : I32;
extern fn __vec_set(this: Vec<I32>, index: USize, item: I32) : Vec<I32>;
extern fn __vec_init(this: Vec<I32>) : USize;
extern fn __vec_capacity(this: Vec<I32>) : USize;
extern fn __vec_includes(this: Vec<I32>, item: I32) : Bool;
extern fn __vec_length(this: Vec<I32>) : USize;
fn vecNew() : Vec<I32> => __vec_new();
fn vecPush(this: Vec<I32>, item: I32) : Vec<I32> => __vec_push(this, item);
fn vecGet(this: Vec<I32>, index: USize) : I32 => __vec_get(this, index);
fn vecSet(this: Vec<I32>, index: USize, item: I32) : Vec<I32> => __vec_set(this, index, item);
fn vecInit(this: Vec<I32>) : USize => __vec_init(this);
fn vecCapacity(this: Vec<I32>) : USize => __vec_capacity(this);
fn vecIncludes(this: Vec<I32>, item: I32) : Bool => __vec_includes(this, item);
fn vecLength(this: Vec<I32>) : USize => __vec_length(this);

extern type Map<K, V>;
extern fn __map_new() : Map<I32, I32>;
extern fn mapSet(this: Map<I32, I32>, k: I32, v: I32) : Map<I32, I32>;
extern fn mapGet(this: Map<I32, I32>, k: I32) : I32;
fn mapNew() : Map<I32, I32> => __map_new();

extern type Set<T>;
extern fn __set_new() : Set<I32>;
extern fn setAdd(this: Set<I32>, item: I32) : Set<I32>;
extern fn setHas(this: Set<I32>, item: I32) : Bool;
fn setNew() : Set<I32> => __set_new();

fn main() : I32 => {
    let v = vecNew();
    v.vecPush(7);
    v.vecPush(9);
    v.vecSet(v.vecLength(), 11);

    let m = mapNew();
    m.mapSet(5, 11);

    let s = setNew();
    s.setAdd(42);

    if (
        v.vecLength() == 3 &&
        v.vecInit() == 3 &&
        v.vecCapacity() >= v.vecInit() &&
        v.vecGet(2) == 11 &&
        v.vecIncludes(9) &&
        m.mapGet(5) == 11 &&
        s.setHas(42)
    ) {
        return 0;
    }
    return 13;
}
