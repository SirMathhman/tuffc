// C/C++ interop: Wrap legacy code with safety proofs

extern fn legacy_payment_processor(amount : I32) : I32;

// UNSAFE: No bounds check on amount
// fn unsafe_process(amount : I32) : I32 => 
//     legacy_payment_processor(amount);

// SAFE: Prove amount is in safe range before calling C code
fn safe_process_payment(amount : I32) : I32 => {
    if (amount <= 0) {
        return 0;
    }
    if (amount > 1000000) {
        return 0;
    }
    legacy_payment_processor(amount)
}

fn main() : I32 => safe_process_payment(500);
